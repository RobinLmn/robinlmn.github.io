"use strict";function _interopDefault(e){return e&&"object"==typeof e&&"default"in e?e.default:e}var syntaxJsx=_interopDefault(require("@babel/plugin-syntax-jsx"));const autoImportGetCurrentInstance=(e,t)=>{const n=t.get("body").filter(e=>e.isImportDeclaration()).map(e=>e.node);const i=n.filter(e=>"@vue/composition-api"===e.source.value);const o=i.some(t=>t.specifiers.some(t=>e.isImportSpecifier(t)&&"getCurrentInstance"===t.local.name));if(!o){const n=e.importSpecifier(e.identifier("getCurrentInstance"),e.identifier("getCurrentInstance"));i.length>0?i[0].specifiers.push(n):t.unshiftContainer("body",e.importDeclaration([n],e.stringLiteral("@vue/composition-api")))}};var index=({types:t})=>({inherits:syntaxJsx,visitor:{Program(e){e.traverse({"ObjectMethod|ObjectProperty"(n){"setup"===n.node.key.name&&n.traverse({JSXAttribute(n){const i=n.get("name");["v-on","on-input","on-change","model"].includes(i.node.name)&&n.traverse({MemberExpression(n){const i=n.get("object"),o=n.get("property");t.isThisExpression(i)&&t.isIdentifier(o)&&["$","_"].includes(o.node.name[0])&&(autoImportGetCurrentInstance(t,e),i.replaceWith(t.callExpression(t.identifier("getCurrentInstance"),[])))}})}})}})}}});module.exports=index;
